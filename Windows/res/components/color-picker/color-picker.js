"use strict";!function(n){var t,i,a,c,o,l,r,d,s,p,h,u,e=(t={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156,hsl:!1},i=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&b.apply(t.data.field.get(0),[!0]),!1},a=function t(e){return b.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),n(document).off("mouseup",t),n(document).off("mousemove",i),!1},c=function(t){var e=("touchmove"==t.type?t.originalEvent.changedTouches[0]:t).pageY;return b.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},o=function t(e){return n(document).off("mouseup touchend",t),n(document).off("mousemove touchmove",c),!1},l=function(t){var e="touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,t.pageY);return b.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},r=function t(e){return n(document).off("mouseup touchend",t),n(document).off("mousemove touchmove",l),!1},d=function t(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),n("html").off("mousedown",t)},s=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement:document.body).scrollLeft,w:window.innerWidth||(t?document.documentElement:document.body).clientWidth}},p=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}},h=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},u=function(t){var e=6-t.length;if(0<e){for(var i=[],a=0;a<e;a++)i.push("0");i.push(t),t=i.join("")}return t},{init:function(r){if("string"==typeof(r=n.extend({},t,r||{})).color)r.color=(r.hsl?N:P)(r.color);else if(null!=r.color.r&&null!=r.color.g&&null!=r.color.b)r.color=(r.hsl?D:z)(r.color);else{if(null==r.color.h||null==r.color.s||null==r.color.b)return this;r.color=(r.hsl?fixHsl:fixHsb)(r.color)}return this.each(function(){if(!n(this).data("colpickId")){var t=n.extend({},r);t.origColor=r.color;var e="collorpicker_"+parseInt(1e3*Math.random());n(this).data("colpickId",e);var i=n('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_x colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",e);i.addClass("colpick_"+t.layout+(t.submit?"":" colpick_"+t.layout+"_ns")),"light"!=t.colorScheme&&i.addClass("colpick_"+t.colorScheme),t.hsl&&i.addClass("colpick_hsl"),i.find("div.colpick_submit").html(t.submitText).click(T),t.fields=i.find("input").change(b).blur(y).focus(w),i.find("div.colpick_field_arrs").mousedown(M).end().find("div.colpick_current_color").click(H),t.selector=i.find("div.colpick_color").on("mousedown touchstart",I),t.selectorIndic=t.selector.find("div.colpick_selector_outer"),t.el=this,t.hue=i.find("div.colpick_hue_arrs"),huebar=t.hue.parent();var a=navigator.userAgent.toLowerCase(),e="Microsoft Internet Explorer"===navigator.appName,a=e?parseFloat(a.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,c=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(e&&a<10)for(var o,l=0;l<=11;l++)o=n("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+c[l]+", endColorstr="+c[l+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+c[l]+", endColorstr="+c[l+1]+')";'),huebar.append(o);else stopList=c.join(","),huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");i.find("div.colpick_hue").on("mousedown touchstart",C),t.newColor=i.find("div.colpick_new_color"),t.currentColor=i.find("div.colpick_current_color"),i.data("colpick",t),f(t.color,i.get(0)),v(t.color,i.get(0)),k(t.color,i.get(0)),_(t.color,i.get(0)),g(t.color,i.get(0)),m(t.color,i.get(0)),x(t.color,i.get(0)),t.flat?(i.appendTo(this).show(),i.css({position:"relative",display:"block"})):(i.appendTo(document.body),n(this).on(t.showEvent,q),i.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){n(this).data("colpickId")&&q.apply(this)})},hidePicker:function(){return this.each(function(){n(this).data("colpickId")&&n("#"+n(this).data("colpickId")).hide()})},setColor:function(e,i){if(i=void 0===i?1:i,"string"==typeof e)e=P(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=z(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=fixHsb(e)}return this.each(function(){var t;n(this).data("colpickId")&&((t=n("#"+n(this).data("colpickId"))).data("colpick").color=e,t.data("colpick").origColor=e,f(e,t.get(0)),v(e,t.get(0)),k(e,t.get(0)),_(e,t.get(0)),g(e,t.get(0)),x(e,t.get(0)),t.data("colpick").onChange.apply(t.parent(),[e,(t.data("colpick").hsl?B:j)(e),(t.data("colpick").hsl?L:O)(e),t.data("colpick").el,1]),i&&m(e,t.get(0)))})}});function f(t,e){t=(n(e).data("colpick").hsl?L:O)(t),n(e).data("colpick").fields.eq(1).val(t.r).end().eq(2).val(t.g).end().eq(3).val(t.b).end()}function v(t,e){n(e).data("colpick").fields.eq(4).val(Math.round(t.h)).end().eq(5).val(Math.round(t.s)).end().eq(6).val(Math.round(t.x)).end()}function k(t,e){n(e).data("colpick").fields.eq(0).val((n(e).data("colpick").hsl?B:j)(t))}function g(t,e){n(e).data("colpick").selector.css("backgroundColor","#"+(n(e).data("colpick").hsl?B({h:t.h,s:100,x:50}):j({h:t.h,s:100,x:100}))),n(e).data("colpick").selectorIndic.css({left:parseInt(n(e).data("colpick").height*t.s/100,10),top:parseInt(n(e).data("colpick").height*(100-t.x)/100,10)})}function _(t,e){n(e).data("colpick").hue.css("top",parseInt(n(e).data("colpick").height-n(e).data("colpick").height*t.h/360,10))}function m(t,e){n(e).data("colpick").currentColor.css("backgroundColor","#"+(n(e).data("colpick").hsl?B:j)(t))}function x(t,e){n(e).data("colpick").newColor.css("backgroundColor","#"+(n(e).data("colpick").hsl?B:j)(t))}function b(t){var e,i,a=n(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?(a.data("colpick").color=e=(a.data("colpick").hsl?N:P)(u(this.value)),f(e,a.get(0)),v(e,a.get(0))):0<this.parentNode.className.indexOf("_hsx")?(a.data("colpick").color=e=p({h:parseInt(a.data("colpick").fields.eq(4).val(),10),s:parseInt(a.data("colpick").fields.eq(5).val(),10),x:parseInt(a.data("colpick").fields.eq(6).val(),10)}),f(e,a.get(0)),k(e,a.get(0))):(i={r:parseInt(a.data("colpick").fields.eq(1).val(),10),g:parseInt(a.data("colpick").fields.eq(2).val(),10),b:parseInt(a.data("colpick").fields.eq(3).val(),10)},a.data("colpick").color=e=(a.data("colpick").hsl?D:z)(h(i)),k(e,a.get(0)),v(e,a.get(0))),g(e,a.get(0)),_(e,a.get(0)),x(e,a.get(0)),a.data("colpick").onChange.apply(a.parent(),[e,(a.data("colpick").hsl?B:j)(e),(a.data("colpick").hsl?L:O)(e),a.data("colpick").el,0])}function y(t){n(this).parent().removeClass("colpick_focus")}function w(){n(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),n(this).parent().addClass("colpick_focus")}function M(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=n(this).parent().find("input").focus(),e={el:n(this).parent().addClass("colpick_slider"),max:0<this.parentNode.className.indexOf("_hsx_h")?360:0<this.parentNode.className.indexOf("_hsx")?100:255,y:t.pageY,field:e,val:parseInt(e.val(),10),preview:n(this).parent().parent().data("colpick").livePreview};n(document).mouseup(e,a),n(document).mousemove(e,i)}function C(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e={cal:n(this).parent(),y:n(this).offset().top};return n(document).on("mouseup touchend",e,o),n(document).on("mousemove touchmove",e,c),t=("touchstart"==t.type?t.originalEvent.changedTouches[0]:t).pageY,b.apply(e.cal.data("colpick").fields.eq(4).val(parseInt(360*(e.cal.data("colpick").height-(t-e.y))/e.cal.data("colpick").height,10)).get(0),[e.cal.data("colpick").livePreview]),!1}function I(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e={cal:n(this).parent(),pos:n(this).offset()};return e.preview=e.cal.data("colpick").livePreview,n(document).on("mouseup touchend",e,r),n(document).on("mousemove touchmove",e,l),t="touchstart"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,t.pageY),b.apply(e.cal.data("colpick").fields.eq(6).val(parseInt(100*(e.cal.data("colpick").height-(t-e.pos.top))/e.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-e.pos.left)/e.cal.data("colpick").height,10)).get(0),[e.preview]),!1}function T(t){var e=n(this).parent(),i=e.data("colpick").color;e.data("colpick").origColor=i,m(i,e.get(0)),e.data("colpick").onSubmit(i,(e.data("colpick").hsl?B:j)(i),(e.data("colpick").hsl?L:O)(i),e.data("colpick").el)}function q(t){t.stopPropagation();var e=n("#"+n(this).data("colpickId"));e.data("colpick").onBeforeShow.apply(this,[e.get(0)]);var i=(c=n(this).offset()).top+this.offsetHeight,a=c.left,t=s(),c=e.width();a+c>t.l+t.w&&(a-=c),e.css({left:a+"px",top:i+"px"}),0!=e.data("colpick").onShow.apply(this,[e.get(0)])&&e.show(),n("html").mousedown({cal:e},d),e.mousedown(function(t){t.stopPropagation()})}function H(){var t=n(this).parent(),e=t.data("colpick").origColor;t.data("colpick").color=e,f(e,t.get(0)),k(e,t.get(0)),v(e,t.get(0)),g(e,t.get(0)),_(e,t.get(0)),x(e,t.get(0))}function S(t){return{r:(t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}}function X(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=(200*t.x+t.s*(100-Math.abs(2*t.x-100)))/200,e.s=200*(e.x-t.x)/e.x,e}function E(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return n.each(i,function(t,e){1==e.length&&(i[t]="0"+e)}),i.join("")}var P=function(t){return z(S(t))},N=function(t){return D(S(t))},z=function(t){var e={h:0,s:0,x:0},i=Math.min(t.r,t.g,t.b),a=Math.max(t.r,t.g,t.b),i=a-i;return e.x=a,e.s=0!=a?255*i/a:0,0!=e.s?t.r==a?e.h=(t.g-t.b)/i:t.g==a?e.h=2+(t.b-t.r)/i:e.h=4+(t.r-t.g)/i:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e},D=function(t){return Y(z(t))},Y=function(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=t.x*(200-t.s)/200,e.s=t.x*t.s/(100-Math.abs(2*e.x-100)),e},O=function(t){var e={},i=t.h,a=255*t.s/100,c=255*t.x/100;return 0==a?e.r=e.g=e.b=c:(c=i%60*((t=c)-(a=(255-a)*c/255))/60,(i=360==i?0:i)<60?(e.r=t,e.b=a,e.g=a+c):i<120?(e.g=t,e.b=a,e.r=t-c):i<180?(e.g=t,e.r=a,e.b=a+c):i<240?(e.b=t,e.r=a,e.g=t-c):i<300?(e.b=t,e.g=a,e.r=a+c):i<360?(e.r=t,e.g=a,e.b=t-c):(e.r=0,e.g=0,e.b=0)),{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},L=function(t){return O(X(t))},j=function(t){return E(O(t))},B=function(t){return j(X(t))};n.fn.extend({colpick:e.init,colpickHide:e.hidePicker,colpickShow:e.showPicker,colpickSetColor:e.setColor}),n.extend({colpick:{rgbToHex:E,rgbToHsb:z,rgbToHsl:D,hsbToHex:j,hsbToRgb:O,hsbToHsl:Y,hexToHsb:P,hexToHsl:N,hexToRgb:S,hslToHsb:X,hslToRgb:L,hslToHex:B}})}(jQuery);