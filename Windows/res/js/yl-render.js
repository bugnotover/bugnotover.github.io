"use strict";YL.render=function(data){$(window).on("message",function(t){var i=t.originalEvent.data;if(!($.inArray(i.type,["ylui-pong","ylui-eval","ylui-emit"])<0)){var t=i.from,n=t[0],s=YL.vue.wins,e=s[n];if(function(t){var e=t[0],i=t[1],t=YL.vue.wins[e];if(t){if(t.secrete===i)return!0;YL.vue.winClose(e),YL.msg(YL.lang("SecurityRisk"),YL.lang("SecurityRiskDetail"))}return!1}(t))switch(i.type){case"ylui-pong":e.pong=Date.now();break;case"ylui-eval":var o=YL.child[i.eval.method].call(YL.child,i.eval.data,n);window.frames[n]&&window.frames[n].postMessage({type:"ylui-eval",result:o,session:i.session},"*");break;case"ylui-emit":var o=i.emit.target,r=[];if("string"==typeof o)r.push(o);else if(Yuri2.isArray(o))r=o;else if(!0===o)for(var a in s)r.push(a);var u=Yuri2.parseURL(e.urlOrigin);r.forEach(function(t){var e=Yuri2.parseURL(s[t].urlOrigin);window.frames[t]&&window.frames[t].postMessage({type:"ylui-event",event:i.emit.event,target:r,data:i.emit.data,session:i.session,from:n,sameOrigin:u.protocol===e.protocol&&u.host===e.host&&u.port===e.port},"*")})}}}),document.body.onbeforeunload=function(t){var e;YL.static.beforeOnloadEnable&&(e=YL.lang("BeforeUnload"),window.event?window.event.returnValue=e:t.returnValue=e)},YL.vue=new Vue({el:"#yl",data:data,components:{GridLayout:VueGridLayout.GridLayout,GridItem:VueGridLayout.GridItem},created:function(){this.initRuntime(!0),console.log("%c"+YL.static.welcome,"color:red;font-weight:bold;")},methods:{contextMenuAddTo:function(t){function i(){YL.util.simpleMsg(YL.lang("Added"))}var n=Yuri2.jsonDeepCopy(t),s=[];return this.tiles.forEach(function(t,e){s.push([YL.util.getStrFa("square")+t.title,function(){YL.addTile(n,e),i()},!YL.static.changeable])}),[YL.util.getStrFa("copy")+YL.lang("AddTo"),[[YL.util.getStrFa("desktop")+YL.lang("DesktopIcons"),function(){YL.addShortcut(n),i()},!YL.static.changeable],[YL.util.getStrFa("list-ul")+YL.lang("MainMenu"),function(){YL.addMenuItem(n),i()},!YL.static.changeable],[YL.util.getStrFa("sliders")+YL.lang("Sidebar"),function(){YL.addSidebarBtn(n),i()},!YL.static.changeable],"|","<span style='color: darkgray'>"+YL.util.getStrFa("square")+YL.lang("Tiles")+"</span>"].concat(s)]},contextMenuUninstall:function(e){var i=this;return[YL.util.getStrFa("trash")+YL.lang("Uninstall"),function(t){YL.util.simpleConfirm(Yuri2.template(YL.lang("UninstallConfirm"),i.apps[e].title),function(){YL.uninstall(e)&&YL.util.simpleMsg(YL.lang("UninstallCompleted"))})},!YL.static.changeable]},contextMenuOpen:function(e){var i=this;return[YL.util.getStrFa("play-circle")+YL.lang("Open"),[[YL.util.getStrFa("window-restore")+YL.lang("Normal"),function(t){i.appOpen(e.app,Yuri2.jsonMerge(e,{openMode:"normal"}),e)}],[YL.util.getStrFa("window-maximize")+YL.lang("Maximize"),function(t){i.appOpen(e.app,Yuri2.jsonMerge(e,{openMode:"max"}),e)}],[YL.util.getStrFa("window-minimize")+YL.lang("Minimize"),function(t){i.appOpen(e.app,Yuri2.jsonMerge(e,{openMode:"min"}),e)}],[YL.util.getStrFa("paper-plane")+YL.lang("Outer"),function(t){i.appOpen(e.app,Yuri2.jsonMerge(e,{openMode:"outer"}),e)}]]]},onResize:function(){var t=this,e=Yuri2.getClientSize();t.runtime.clientSize.width=e.width,t.runtime.clientSize.height=e.height,t.runtime.desktopSize.width=e.width,t.runtime.desktopSize.height=e.height-40,t.runtime.isSmallScreen=e.width<=768,t.runtime.isHorizontalScreen=e.width>e.height,t.runtime.startMenu.width=(e.width>t.startMenu.width&&!t.runtime.isSmallScreen?t.startMenu:e).width,t.runtime.startMenu.height=(t.runtime.desktopSize.height>t.startMenu.height&&!t.runtime.isSmallScreen?t.startMenu:t.runtime.desktopSize).height;var i=t.runtime.startMenu.width-(t.runtime.isSmallScreen?80:328),n=1,n=i<=460?1:i<=769?2:i<=1024?3:4;t.runtime.tilesGroupNum=n;for(var s=0;s<1e3;s++)if((i-12*n)/n<6*(s+4)){s--;break}t.runtime.tileSize=s,t.runtime.tilesWidth=6*(s+4),t.runtime.shortcutWidth=t.runtime.isSmallScreen?56:68,t.runtime.shortcutHeight=t.runtime.isSmallScreen?70:90,t.runtime.shortcutsGrid.x=parseInt(t.runtime.desktopSize.width/t.runtime.shortcutWidth),t.runtime.shortcutsGrid.y=parseInt(t.runtime.desktopSize.height/t.runtime.shortcutHeight),t.emitWinEvent(0,"resize",{width:t.runtime.desktopSize.width,height:t.runtime.desktopSize.height})},initRuntime:function(t){var s=this,e=s.onResize;e(),t&&$(window).resize(e),t&&setInterval(function(){var t=new Date,e=(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),i=t.getMinutes();s.runtime.time=e+":"+(i=i<10?"0"+i:i),s.runtime.date=t},1e3),t&&this.$nextTick(function(){for(var i=["#yl .tiles-box","#yl .startMenu .menu","#yl .center .msgs"],t=0;t<i.length;t++)$(i[t]).niceScroll({cursorcolor:"#ffffff30",cursorwidth:"4px",cursorborder:"none",grabcursorenabled:!1});setInterval(function(){for(var t=0;t<i.length;t++){var e=i[t];try{$(e).getNiceScroll().resize()}catch(e){}}},500),$("#yl").css({opacity:1,display:"block"})}),t&&setInterval(function(){var t,e,i,n;s.configs.wallpaperSlide&&(e=60*s.configs.wallpaperSlideItv*1e3,i=s.configs.wallpaperSlideTime,t=s.configs.wallpaperSlideIndex,e+i<(n=Date.now())&&(s.configs.wallpaperSlideTime=n,i=(e=s.configs.wallpapers).length,n=0,s.configs.wallpaperSlideRandom?n=YL.util.randInt(0,i-1):i<=(n=t+1)&&(n=0),e[n]&&(s.configs.wallpaper=e[n].image,s.configs.wallpaperSlideIndex=n)))},1e3),Yuri2.isIE()&&(s.runtime.isIE=!0,YL.static.WarningPerformanceInIE&&setTimeout(function(){YL.msg(YL.lang("WarningPerformanceInIETitle"),YL.lang("WarningPerformanceInIEContent"))},2e3));var i,e=new Image,n=this.configs.wallpaper;e.src=n,e.onload=function(){s.runtime.wallpaper=n,s.configs.autoThemeColor&&s.backgroundToThemeColor()},s.backgroundUpdateScale(),t&&(i="",setInterval(function(){try{var t=JSON.stringify(YL.export());t!==i&&(i=t,localStorage.setItem(YL.static.localStorageName,t),s.emitWinEvent(0,"dataChanged"))}catch(t){YL.debug(t)}},1e3)),t&&(o=function(t){(t=t||window.event).ctrlKey&&116===(t.which||t.keyCode)?YL.static.beforeOnloadEnable=!1:116===(t.which||t.keyCode)&&(t.preventDefault?t.preventDefault():(t.keyCode=0,t.returnValue=!1),s.runtime.winActive?s.winRefresh(s.runtime.winActive):s.flash())},document.addEventListener?document.addEventListener("keydown",o,!1):document.attachEvent("onkeydown",o)),t&&setInterval(function(){var t,e=Date.now();for(t in s.wins){var i=s.wins[t];i.childSupport=i.pong&&e-i.pong<500}},300);var o=function(){var t,e=[];for(t in s.apps)0<s.apps[t].autoRun&&e.push(t);e.sort(function(t,e){return s.apps[e].autoRun-s.apps[t].autoRun}),e.forEach(function(t){var e=s.appOpen(t,{});s.apps[t].plugin&&s.runtime.isSmallScreen&&s.$nextTick(function(){s.winMinimize(e)})})};t?YL.onReady(o):o(),t&&!YL.static.serialNumber&&YL.onReady(function(){setTimeout(function(){YL.msg("Luckey's Windows",'Hello，你好，欢迎来到 Windows 小分站！<br/>个人主页：<a style="color: white" target="_blank" href="http://www.luckyzmj.cn/"> www.luckyzmj.cn </a><br />本网站 UI 由 <a style="color: white" target="_blank" href="https://ylui.yuri2.cn"> YLUI </a> 强力驱动<p>欢迎使用支付宝扫描二维码对作者进行捐赠~<br/><br/><img style="width: 100%" src="/medias/reward/alipay.jpg"/></p>')},1500)}),this.ready=!0},setWithID:function(t,e,i,n){do{var s=!0===n?i+Yuri2.randInt(1e8,999999999):i+YL.util.getID()}while(void 0!==t[s]);return this.$set(t,s,e),s},emitWinEvent:function(e,i,n){var t,s=[];for(t in this.wins)s.push(t);this.$nextTick(function(){s.forEach(function(t){window.frames[t].postMessage&&window.frames[t].postMessage({type:"ylui-event",event:i,target:s,data:n,session:null,from:e,sameOrigin:!1},"*")})})},flash:function(){var t=this;t.runtime.shortcutsShow=!1,setTimeout(function(){t.runtime.shortcutsShow=!0},200),t.runtime.customTileRandomToken=YL.util.randInt(1e3,9999)},appOpen:function appOpen(id,options,source){var that=this;options=options||{};var app="string"==typeof id?this.apps[id]:id,appMerge=Yuri2.jsonMerge(app,options);if(this.hideOpens(),appMerge.single)for(var i in this.wins){var w=this.wins[i];if(w.single&&w.app===id)return that.winSetActive(i),void that.winShow(i)}if(appMerge.url)if(this.runtime.winOpened>=this.configs.openMax)YL.util.simpleMsg(Yuri2.template(YL.lang("MaxWinsReached"),this.configs.openMax));else{this.runtime.winOpenCounter++;var dx=parseInt(this.runtime.winOpenCounter%10)*this.runtime.clientSize.height*.01,evalNum=function evalNum(str){var rel=0;if(isNaN(str))try{/^[\dxy+\-*\/()\s.]*$/.test(str)||(str="600");var query="var x=YL.vue.runtime.clientSize.width;var y=YL.vue.runtime.clientSize.height-40;"+str,rel=eval(query)}catch(e){YL.debug(e)}else rel=str;return parseInt(rel)},win={app:id,state:"normal",min:!1,addressBar:!0,style:{position:{x:evalNum(app.position.x)+(app.position.autoOffset?dx:0),y:evalNum(app.position.y)+(app.position.autoOffset?dx+80:0),left:app.position.left,top:app.position.top},size:{width:evalNum(app.size.width),height:evalNum(app.size.height)}},drag:{mDownPosition:!1,mDownSize:!1,x:0,y:0},oldStyle:{position:{left:0,top:0},size:{width:0,height:0}},source:source,resizable:!0,history:{pos:-1,urls:[]},data:{},pong:null,childSupport:!1,init:!0},win=Yuri2.jsonMerge(win,appMerge);if(win.style=Yuri2.jsonDeepCopy(win.style),win.style.index=YL.util.getBiggerWinZIndex(),win.url=YL.util.urlParams(win.url,win.params,win.hash),win.urlRandomToken&&(win.url=YL.util.updateUrlRandomToken(win.url)),"outer"!==win.openMode){win.urlOrigin=win.url,win.urlBar=win.url;var winID=this.setWithID(this.wins,win,"win-",!0),secrete=Math.random();switch(win.idIframe=winID+"iframe-",win.secrete=secrete,this.emitWinEvent(winID,"open",null),win.openMode){case"max":this.winMaximize(winID);break;case"min":this.winMinimize(winID)}return win.min||(this.runtime.winActive=winID),that.$nextTick(function(){var t=setInterval(function(){$("#"+winID).length<=0?clearInterval(t):window.frames[winID].postMessage&&window.frames[winID].postMessage({type:"ylui-ping",id:winID,secrete:secrete,itv:t,data:win.data},"*")},500),e=$("#"+win.idIframe)[0];YL.util.iframeOnClick.track(e,function(){0===Object.getOwnPropertyNames(YL.util._iframe_click_lock_children).length&&(that.winSetActive(winID),ContextMenu._removeContextMenu())},winID),win.min||e.focus();function i(){var t=(new Date).getTime();setTimeout(function(){win.init=!1},1e3<t-n?0:1e3)}var n=(new Date).getTime();e.attachEvent?e.attachEvent("onload",i):e.onload=i}),that.runtime.isSmallScreen&&!win.plugin&&win.resizable&&that.winMaximize(winID),setTimeout(function(){win.init=!1},1e4),winID}window.open(win.url)}},tileStyle:function(t){function e(t){return t*(i+4)-4}var i=this.runtime.tileSize,n=t.w,s=t.h,t=e(Math.min(n,s)/1.5);return{width:t+"px",height:t+"px",top:(e(s)-t)/2+"px",left:(e(n)-t)/2+"px","line-height":t+"px","font-size":t/2+"px"}},winIsMin:function(t){return this.wins[t].min},winShow:function(t){this.wins[t].min=!1},winShowToggle:function(t){t=this.wins[t];t.min=!t.min},winClose:function(t){this.wins[t]&&(this.$delete(this.wins,t),this.emitWinEvent(t,"close",null),this.findNewActive())},winMaximize:function(t){t=this.wins[t];t.resizable?(t.state="max",t.oldStyle.position.y=t.style.position.y,t.style.position.y=t.addressBar?80:40,t.oldStyle.position.x=t.style.position.x,t.style.position.x=0,t.oldStyle.size.width=t.style.size.width,t.style.size.width=this.runtime.desktopSize.width,t.oldStyle.size.height=t.style.size.height,t.style.size.height=this.runtime.desktopSize.height-(t.addressBar?80:40)):YL.util.simpleMsg(YL.lang("AttentionNoResize"))},winRestore:function(t){t=this.wins[t];t.state="normal",t.style.position.y=t.oldStyle.position.y,t.style.position.x=t.oldStyle.position.x,t.style.size.width=t.oldStyle.size.width,t.style.size.height=t.oldStyle.size.height},winMinimize:function(t){this.wins[t].min=!0,this.findNewActive()},winSetCenter:function(t){var e,i=this.wins[t];this.winShow(t),i.resizable?(i.state="normal",e=this.runtime.desktopSize.width,t=this.runtime.desktopSize.height,i.style.size.width=.8*e,i.style.size.height=.8*t-80,i.style.position.y=.1*t+80,i.style.position.x=.1*e):YL.util.simpleMsg(YL.lang("AttentionNoResize"))},winTitleMouseDown:function(i,n){var s,o,r,a,t,u;3!==n.which&&(s=!n.changedTouches,t=(o=function(t){var e,i={x:0,y:0};return n.changedTouches?(e=t.changedTouches||t.originalEvent.changedTouches,i.x=e[0].pageX,i.y=e[0].pageY):(i.x=t.pageX,i.y=t.pageY),i})(n),(a=(r=this).wins[i]).drag.x=t.x,a.drag.y=t.y,a.drag.mDownPosition=!0,t=function t(e){a.drag.mDownPosition&&(a.drag.mDownPosition=!1,r.runtime.drag=!1,s?($(document).unbind("mousemove",u),$(document).unbind("mouseup",t)):($(document).unbind("touchmove",u),$(document).unbind("touchend",t)))},u=function(t){var e;a.drag.mDownPosition&&(r.runtime.drag=!0,t=(e=o(t)).x,e=e.y,"max"===a.state&&2<e-a.drag.y&&r.winRestore(i),a.style.position.x+=a.style.position.left?t-a.drag.x:a.drag.x-t,a.style.position.y+=a.style.position.top?e-a.drag.y:a.drag.y-e,a.drag.x=t,a.drag.y=e)},s?($(document).mouseup(t),$(document).mousemove(u)):($(document).on("touchend",t),$(document).on("touchmove",u)))},winTitleDblclick:function(t){var e=this.wins[t];e.plugin||("max"===e.state?this.winRestore(t):this.winMaximize(t))},winResizeMouseDown:function(t,e){var i=this,n=this.wins[t];n.drag.x=e.pageX,n.drag.y=e.pageY,n.drag.mDownSize=!0;var e=function t(e){n.drag.mDownSize&&(n.drag.mDownSize=!1,i.runtime.drag=!1,$(document).unbind("mouseup",t),$(document).unbind("mousemove",s))},s=function(t){var e;n.drag.mDownSize&&(i.runtime.drag=!0,e=t.pageX,t=t.pageY,n.style.size.width+=e-n.drag.x,200<n.style.size.width||(n.style.size.width=200),n.style.size.height+=t-n.drag.y,84<n.style.size.height||(n.style.size.height=84),n.drag.x=e,n.drag.y=t)};$(document).mouseup(e),$(document).mousemove(s)},winSetActive:function(t){var e=Date.now();e-this.runtime.winActiveTime<200||(this.runtime.winActiveTime=e,this.wins[t].style.index=YL.util.getBiggerWinZIndex(),this.runtime.winActive=t,this.startMenu.open=!1,this.drawer=null,this.center.open=!1)},winStyle:function(t){t=this.wins[t];return{width:t.style.size.width+"px",height:t.style.size.height+"px",top:t.style.position.top?t.style.position.y+"px":"auto",left:t.style.position.left?t.style.position.x+"px":"auto",bottom:t.style.position.top?"auto":t.style.position.y+"px",right:t.style.position.left?"auto":t.style.position.x+"px","z-index":t.style.index+(t.background?-500:0)}},winInitIconStyle:function(t){t=this.wins[t],t=Math.min(t.style.size.width,t.style.size.height)/4;return{"font-size":t+"px","line-height":t+"px",width:1.5*t+"px"}},winClass:function(t){var e=this.wins[t];return{active:t===this.runtime.winActive&&!this.winIsMin(t),plugin:e.plugin,"addressBar-hidden":!e.addressBar}},winTaskClick:function(t){this.wins[t];this.winIsMin(t)||this.startMenu.open||this.drawer?(this.winShow(t),this.winSetActive(t)):this.runtime.winActive===t?(this.winMinimize(t),this.findNewActive()):this.winSetActive(t)},winRefresh:function(t){var e=this.wins[t],i=e.urlBar;this.winJump(t,e.urlRandomToken?YL.util.updateUrlRandomToken(i):i)},winHome:function(t){var e=this.wins[t],i=e.urlOrigin;this.winJump(t,e.urlRandomToken?YL.util.updateUrlRandomToken(i):i)},winJump:function(t,e){var i=this.wins[t];i.url=i.urlBar="about:blank",setTimeout(function(){i.url=i.urlBar=e},200)},winContextMenu:function(t,e){var i=this,n=this.wins[t],s=[[YL.util.getStrFa("refresh")+YL.lang("Refresh"),function(){i.winRefresh(t)}]];n.addressBar?s.push([YL.util.getStrFa("location-arrow")+YL.lang("HideAddressBar"),function(){n.addressBar=!1}]):s.push([YL.util.getStrFa("location-arrow")+YL.lang("DisplayAddressBar"),function(){n.addressBar=!0}]),s.push([YL.util.getStrFa("magic")+YL.lang("CollectAsApplication"),function(){layer.prompt({title:YL.lang("AttentionEnterAppName"),formType:0,value:Yuri2.parseURL(n.url).host,maxlength:32,skin:"yl",zIndex:19930012},function(t,e){layer.close(e);e=YL.util.getAppDataTemplate();e.url=YL.util.removeUrlRandomToken(n.url),e.title=t,e.icon.type="str",e.icon.content=t;t="app-"+YL.util.getID();YL.addApp(t,e),YL.addShortcut(t),YL.addMenuItem(t),YL.util.simpleMsg(YL.lang("Added"))})},!YL.static.changeable]),s.push("|");var o=[];o.push(YL.util.getStrFa("arrows")+Yuri2.template("${0}px * ${1}px",parseInt(n.style.size.width),parseInt(n.style.size.height))),o.push([YL.util.getStrFa("window-restore")+YL.lang("CentreAdjustment"),function(){i.winSetCenter(t),i.winSetActive(t)}]),i.winIsMin(t)?o.push([YL.util.getStrFa("clone")+YL.lang("DisplayWindow"),function(){i.winShow(t)}]):o.push([YL.util.getStrFa("window-minimize")+YL.lang("Minimize"),function(){i.winMinimize(t)}]),!n.plugin&&"normal"===n.state&&n.resizable&&o.push([YL.util.getStrFa("window-maximize")+YL.lang("Maximize"),function(){i.winShow(t),i.winMaximize(t)}]),n.plugin||"max"!==n.state||o.push([YL.util.getStrFa("window-restore")+YL.lang("Restore"),function(){i.winRestore(t)}]),o.push("|"),n.style.position.left?o.push([YL.util.getStrFa("angle-double-right")+YL.lang("AlignRight")+Yuri2.template(" (${0}px)",parseInt(n.style.position.x)),function(){n.style.position.left=!n.style.position.left}]):o.push([YL.util.getStrFa("angle-double-left")+YL.lang("AlignLeft")+Yuri2.template(" (${0}px)",parseInt(n.style.position.x)),function(){n.style.position.left=!n.style.position.left}]),n.style.position.top?o.push([YL.util.getStrFa("angle-double-down")+YL.lang("AlignBottom")+Yuri2.template(" (${0}px)",parseInt(n.style.position.y)),function(){n.style.position.top=!n.style.position.top}]):o.push([YL.util.getStrFa("angle-double-up")+YL.lang("AlignTop")+Yuri2.template(" (${0}px)",parseInt(n.style.position.y)),function(){n.style.position.top=!n.style.position.top}]),s.push([YL.util.getStrFa("windows")+YL.lang("WindowPosition"),o]),s.push([YL.util.getStrFa("paper-plane")+YL.lang("OpenOuter"),function(){window.open(n.url)}]),n.source&&(s.push([YL.util.getStrFa("crop")+YL.lang("RememberSizeAndPosition"),function(){n.source.style={},n.source.style.position={},n.source.style.size={},n.source.style.position.x=n.style.position.x,n.source.style.position.y=n.style.position.y,n.source.style.position.left=n.style.position.left,n.source.style.position.top=n.style.position.top,n.source.style.position.autoOffset=!1,n.source.style.size.height=n.style.size.height,n.source.style.size.width=n.style.size.width,YL.util.simpleMsg(YL.lang("Recorded"))},!YL.static.changeable]),n.source.style&&s.push([YL.util.getStrFa("crop")+YL.lang("ResetSizeAndPosition"),function(){delete n.source.style},!YL.static.changeable])),n.plugin&&(s.push("|"),n.background?s.push([YL.util.getStrFa("sort-up")+YL.lang("PutForeground"),function(){n.background=!1}]):s.push([YL.util.getStrFa("sort-down")+YL.lang("PutBackground"),function(){n.background=!0}])),s.push("|"),s.push([YL.util.getStrFa("close")+YL.lang("Close"),function(){i.winClose(t)}]),ContextMenu.render(e,s,this,"light")},findNewActive:function(){var t,e=null,i=0;for(t in this.wins){var n=this.wins[t];!n.min&&n.style.index>i&&(i=n.style.index,e=t)}this.runtime.winActive=e},winHideAll:function(){for(var t in this.wins){t=this.wins[t];t.plugin||(t.min=!0)}},winShowAll:function(){for(var t in this.wins){t=this.wins[t];t.plugin||(t.min=!1)}},winCloseAll:function(){for(var t in this.wins)this.wins[t].plugin||this.$delete(this.wins,t)},menuItemClose:function(t){var e,i=t||this.startMenu.menu;for(e in i){var n=i[e];n.children&&(n.open=!1,this.menuItemClose(n))}},menuClose:function(){this.startMenu.open=!1,this.menuItemClose()},showDesktop:function(){this.winHideAll(),this.hideOpens()},badgeText:function(t){return isNaN(t)?t:99<t?"99+":parseInt(t)},drawerStyle:function(){return{top:"0px",left:"0px"}},hideOpens:function(){this.drawer=null,this.menuClose(),this.center.open=!1,this.runtime.pluginIconsOpen=!1,this.runtime.CalendarOpen=!1},desktopMouseDown:function(t){this.hideOpens(),t&&this.emitWinEvent(0,"desktopMouseDown",{x:t.x,y:t.y})},desktopMouseUp:function(t){this.hideOpens(),t&&this.emitWinEvent(0,"desktopMouseUp",{x:t.x,y:t.y})},desktopClick:function(t){this.hideOpens(),t&&this.emitWinEvent(0,"desktopClick",{x:t.x,y:t.y})},desktopContextMenu:function(t){var e=this;e.hideOpens();var i=[[YL.util.getStrFa("refresh")+YL.lang("Refresh"),function(){e.flash()}],"|",[YL.util.getStrFa("desktop")+YL.lang("DisplayDesktop"),function(){e.showDesktop()}],[YL.util.getStrFa("credit-card")+YL.lang("Personalization"),[[YL.util.getStrFa("paint-brush")+YL.lang("ThemeColor"),function(){YL.open("yl-system",{data:{nav:"colors"}})},!YL.static.changeable],[YL.util.getStrFa("picture-o")+YL.lang("Wallpaper"),function(){YL.open("yl-system",{data:{nav:"wallpaper"}})},!YL.static.changeable]]],[YL.util.getStrFa("cog")+YL.lang("SystemOptions"),function(){YL.open("yl-system")},!YL.static.changeable],"|",[YL.util.getStrFa("object-group")+YL.lang("FullScreen"),function(){YL.util.enableFullScreen()}],[YL.util.getStrFa("object-ungroup")+YL.lang("NormalScreen"),function(){YL.util.disableFullScreen()}],[YL.util.getStrFa("circle-o-notch")+YL.lang("Reload"),function(){YL.f5()}],"|",[YL.util.getStrFa("info-circle")+YL.lang("AboutUs"),function(){YL.aboutUs()}]];ContextMenu.render(t,i,this,"light")},desktopMouseMove:function(t){this.emitWinEvent(0,"desktopMouseMove",{x:t.x,y:t.y})},shortcutOpen:function(t,e){var i=Date.now();!t||20<t.drag.moved||i-this.runtime.shortcutOpenedAt<500||(t.children?this.drawer=e:this.appOpen(t.app,t,t),this.runtime.shortcutOpenedAt=Date.now(),YL.debug(YL.lang("OpenIcons")+":"+t.title))},shortcutGrid:function(t){return{x:parseInt(t/this.runtime.shortcutsGrid.y),y:parseInt(t%this.runtime.shortcutsGrid.y)}},shortcutPosition:function(t,e){var i=this.shortcutGrid(t),t=(null===e?this.shortcuts:this.shortcuts[e].children)[t];return{x:i.x*this.runtime.shortcutWidth+t.drag.left,y:i.y*this.runtime.shortcutHeight+t.drag.top}},shortcutStyle:function(t,e){e=this.shortcutPosition(t,e);return{left:e.x+"px",top:e.y+"px"}},shortcutClass:function(t,e,i){return{move:e.drag.mDown,insert:this.runtime.shortcutInsert===t&&!i,over:this.runtime.shortcutOver===t&&!i,cut:this.shortcutCutOutFromDrawer(e)}},shortcutMouseDown:function(o,r,n){var a,u,s,h,l,c,p,t,d;n.which&&1!==n.which||(a=!n.changedTouches,u=Date.now(),t=(s=function(t){var e,i={x:0,y:0};return n.changedTouches?(e=t.changedTouches||t.originalEvent.changedTouches,i.x=e[0].pageX,i.y=e[0].pageY):(i.x=t.pageX,i.y=t.pageY),i})(n),h=this,(c=((l=null!==r)?h.shortcuts[r].children:h.shortcuts)[o]).drag.mDown=!0,c.drag.x=t.x,c.drag.y=t.y,c.drag.moved=0,p=function(s){var o,r,a=h.shortcutPosition(s,null),u=!1,l=!1,c=!1;return h.shortcuts.forEach(function(t,e){var i,n;e!==s&&(i=(n=h.shortcutPosition(e,null)).x-a.x,n=n.y-a.y,Math.abs(i)<h.runtime.shortcutWidth/4&&Math.abs(n)<h.runtime.shortcutHeight/2&&(o=e,u=!0,l=(r=n)<.3*-h.runtime.shortcutHeight,c=Math.abs(n)<.3*h.runtime.shortcutHeight))}),{on:u,id:o,by:r,insert:l,over:c}},t=function t(e){if(c.drag.mDown){if(c.drag.mDown=!1,l)h.shortcutCutOutFromDrawer(c)&&(h.shortcuts.push(c),h.shortcuts[r].children.splice(o,1));else{var i,n=p(o);if(n.insert)if(n.id>o)for(var s=n.id-o;0<s;s--)Yuri2.arrDownRecord(h.shortcuts,n.id-s);else for(s=o-n.id;1<s;s--)Yuri2.arrUpRecord(h.shortcuts,n.id+s);n.over&&(i=h.shortcuts[n.id],c.children||i.children?!c.children&&i.children?(i.children.push(c),h.shortcuts.splice(o,1)):c.children&&!i.children?(c.children.push(i),h.shortcuts[n.id]=c,h.shortcuts.splice(o,1)):c.children&&i.children&&(c.children.forEach(function(t){i.children.push(t)}),h.shortcuts.splice(o,1)):(h.$set(h.shortcuts,n.id,{title:YL.lang("IconGroup")+YL.util.getID(),drag:{mDown:!1,left:0,top:0,x:0,y:0},children:[i,c]}),h.shortcuts.splice(o,1)))}c.drag.moved<20&&Date.now()-u<300&&h.shortcutOpen(c,o),c.drag.moved=0,c.drag.left=c.drag.top=0,h.runtime.shortcutInsert=h.runtime.shortcutOver=null,a?($(document).unbind("mousemove",d),$(document).unbind("mouseup",t)):($(document).unbind("touchmove",d),$(document).unbind("touchend",t))}},d=function(t){var e,i,n;c.drag.mDown&&(e=(n=s(t)).x,i=n.y,t=e-c.drag.x,n=i-c.drag.y,c.drag.left+=t,c.drag.top+=n,c.drag.x=e,c.drag.y=i,c.drag.moved+=Math.abs(t)+Math.abs(n),(n=p(o)).insert?h.runtime.shortcutInsert=n.id:h.runtime.shortcutInsert=null,n.over?h.runtime.shortcutOver=n.id:h.runtime.shortcutOver=null)},a?($(document).mouseup(t),$(document).mousemove(d)):($(document).on("touchend",t),$(document).on("touchmove",d)))},shortcutCutOutFromDrawer:function(t){return Math.abs(t.drag.left)+Math.abs(t.drag.top)>1.5*this.runtime.shortcutWidth},shortcutContextMenu:function(e,i,t,n){var s,o=this,r=(null===i?o.shortcuts:o.shortcuts[i].children)[e],a=[];r.children?a.push([YL.util.getStrFa("play-circle")+YL.lang("Open"),function(t){o.shortcutOpen(r,e)}]):a.push(o.contextMenuOpen(r)),a.push("|"),r.children?(a.push([YL.util.getStrFa("tags")+YL.lang("Rename"),function(){o.shortSetting=r},!YL.static.changeable]),a.push([YL.util.getStrFa("sitemap")+YL.lang("UnGroup"),function(t){r.children.forEach(function(t){o.shortcuts.splice(e+1,0,t)}),o.shortcuts.splice(e,1)},!YL.static.changeable])):(s=Yuri2.jsonDeepCopy({title:r.title,hash:r.hash,params:r.params,app:r.app,style:r.style}),a.push(o.contextMenuAddTo(s)),a.push([YL.util.getStrFa("tags")+YL.lang("Rename")+"/"+YL.lang("Options"),function(t){o.shortSetting=r},!YL.static.changeable])),r.app&&o.apps[r.app].badge&&a.push([YL.util.getStrFa("map-pin")+YL.lang("ClearSuperscript"),function(){o.apps[r.app].badge=0},!YL.static.changeable]),a.push("|"),a.push([YL.util.getStrFa("remove")+YL.lang("Delete"),function(t){YL.util.simpleConfirm(Yuri2.template(YL.lang("DeleteIconConfirm"),r.title),function(){(n?o.shortcuts[i].children:o.shortcuts).splice(e,1)})},!YL.static.changeable]),r.app&&a.push(o.contextMenuUninstall(r.app)),ContextMenu.render(t,a,this,"light")},shortcutGetDrawerBadge:function(t){var e,i=this.shortcuts[t].children,n=0;for(e in i){var s=i[e],s=parseInt(this.apps[s.app].badge);n+=s=isNaN(s)?1:s}return n},menuItemClick:function(t){this.appOpen(t.app,t,t)},msgClose:function(t){this.center.msg[t].hide=!0,this.$delete(this.center.msg,t),this.center.msgNum--},btnCenterClick:function(){this.center.open?this.hideOpens():(this.hideOpens(),this.center.open=!0,this.center.unread=0)},btnCenterClear:function(){var t,e=this;for(t in e.center.msg)e.center.msg[t].hide=!0;e.$set(e.center,"msg",{}),setTimeout(function(){e.center.unread=0,e.center.msgNum=0},500),setTimeout(function(){e.center.open=!1},1500)},barContextMenu:function(t){var e=this,i=[[YL.util.getStrFa("window-minimize")+YL.lang("HideAll"),function(){e.winHideAll()}],[YL.util.getStrFa("clone")+YL.lang("DisplayAll"),function(){e.winShowAll()}],[YL.util.getStrFa("window-close")+YL.lang("CloseAll"),function(){e.winCloseAll()}],"|"];e.configs.topTaskBar?i.push([YL.util.getStrFa("arrow-down")+YL.lang("BottomTaskBar"),function(){e.configs.topTaskBar=!1}],!YL.static.changeable):i.push([YL.util.getStrFa("arrow-up")+YL.lang("TopTaskBar"),function(){e.configs.topTaskBar=!0}]),ContextMenu.render(t,i,this)},tileContextMenu:function(i,n,t){var s,o=this,r=o.tiles[i].data[n],e=Yuri2.jsonDeepCopy({title:r.title,hash:r.hash,params:r.params,app:r.app,style:r.style}),e=[o.contextMenuOpen(r),o.contextMenuAddTo(e),[YL.util.getStrFa("tags")+YL.lang("Rename")+"/"+YL.lang("Options"),function(t){o.shortSetting=r},!YL.static.changeable],"|",[YL.util.getStrFa("braille")+YL.lang("Small")+YL.lang("Size"),function(){r.w=1,r.h=1},!YL.static.changeable],[YL.util.getStrFa("braille")+YL.lang("Middle")+YL.lang("Size"),function(){r.w=2,r.h=2},!YL.static.changeable],[YL.util.getStrFa("braille")+YL.lang("Big")+YL.lang("Size"),function(){r.w=4,r.h=4},!YL.static.changeable]];1<o.tiles.length&&(s=[],o.tiles.forEach(function(t,e){e!==i&&s.push([o.tiles[e].title,function(){o.tiles[i].data.splice(n,1);var t=Yuri2.jsonDeepCopy(r);t.y=999,t.x=0,o.tiles[e].data.push(t)},!YL.static.changeable])}),e.push([YL.util.getStrFa("cut")+YL.lang("MoveTo"),s])),e.push("|"),e.push([YL.util.getStrFa("remove")+YL.lang("Delete"),function(){YL.util.simpleConfirm(Yuri2.template(YL.lang("DeleteTileConfirm"),r.title),function(){o.tiles[i].data.splice(n,1)})},!YL.static.changeable]),e.push(o.contextMenuUninstall(r.app)),ContextMenu.render(t,e,this)},tileSrcCustom:function(t){return t.urlRandomToken?YL.util.updateUrlRandomToken(t.customTile,"",this.runtime.customTileRandomToken):t.customTile},menuContextMenu:function(t){var r=this,n=t.item,e=Yuri2.jsonDeepCopy({title:n.title,hash:n.hash,params:n.params,app:n.app,style:n.style}),a=t.id,i=[];n.app&&!n.children?i=[r.contextMenuOpen(n),r.contextMenuAddTo(e),[YL.util.getStrFa("tags")+YL.lang("Rename")+"/"+YL.lang("Options"),function(t){r.shortSetting=n},!YL.static.changeable]]:(i.push([YL.util.getStrFa("object-group")+YL.lang("NewSubgroup"),function(){var t={title:YL.lang("Group"),children:{},open:!0};r.setWithID(n.children,t,"itemPushed-")},!YL.static.changeable]),i.push([YL.util.getStrFa("tags")+YL.lang("Rename"),function(){r.shortSetting=n},!YL.static.changeable])),i.push("|"),i.push([YL.util.getStrFa("cut")+YL.lang("CutAndExchange"),function(){r.runtime.menuItemCut=a,YL.util.simpleMsg(n.title+" "+YL.lang("Recorded"))},!YL.static.changeable]),r.runtime.menuItemCut&&(i.push([YL.util.getStrFa("paste")+YL.lang("Paste"),function(){var i=r.runtime.menuItemCut;r.menuItemAction(i,function(t,e){e.children?r.$delete(e.children,i):r.$delete(e,i),r.$set(n.children,i,t)}),r.runtime.menuItemCut=null},!YL.static.changeable]),i.push([YL.util.getStrFa("exchange")+YL.lang("Exchange"),function(){var i,n,s,o,t=a,e=r.runtime.menuItemCut;r.menuItemAction(t,function(t,e){i=t,n=e}),r.menuItemAction(e,function(t,e){s=t,o=e}),r.runtime.menuItemCut=null;try{n[t]=s,o[e]=i}catch(t){}},!YL.static.changeable])),i.push("|"),i.push([YL.util.getStrFa("remove")+YL.lang("Delete"),function(){YL.util.simpleConfirm(Yuri2.template(YL.lang("DeleteMenuConfirm"),n.title),function(){r.menuItemAction(a,function(t,e){e.children?r.$delete(e.children,a):r.$delete(e,a)})})},!YL.static.changeable]),n.app&&i.push(r.contextMenuUninstall(n.app)),ContextMenu.render(t.event,i,this)},menuMainContextMenu:function(t){var n=this,e=[[YL.util.getStrFa("object-group")+YL.lang("NewSubgroup"),function(){var t={title:YL.lang("Group"),children:{},open:!0};n.setWithID(n.startMenu.menu,t,"itemPushed-")},!YL.static.changeable],[YL.util.getStrFa("paste")+YL.lang("Paste"),function(){var i=n.runtime.menuItemCut;n.menuItemAction(i,function(t,e){e.children?n.$delete(e.children,i):n.$delete(e,i),n.$set(n.startMenu.menu,i,t)}),n.runtime.menuItemCut=null},!YL.static.changeable]];ContextMenu.render(t,e,this)},menuItemAction:function(t,e,i){var n,s=i?i.children:this.startMenu.menu;for(n in s){var o=s[n];n===t?e(o,s):o.children&&this.menuItemAction(t,e,o)}},tilesBoxContextMenu:function(t){var e=[[YL.util.getStrFa("object-group")+YL.lang("NewSubgroup"),function(){YL.addTileGroup()}],!YL.static.changeable];ContextMenu.render(t,e,this)},backgroundToThemeColor:function(){var e=this;YL.util.imgUrlToThemeColor(this.runtime.wallpaper,function(t){e.configs.themeColor=t},.6)},backgroundUpdateScale:function(){var i=this,t=this.configs.wallpaper;YL.util.imgUrlToSize(t,function(t){var e=t.width||1,t=t.height||1;i.runtime.wallpaperScale=e/t})},sidebarBtnContextMenu:function(t,e){var i=this,n=i.startMenu.sidebar.btns[t],s=Yuri2.jsonDeepCopy({title:n.title,hash:n.hash,params:n.params,app:n.app,style:n.style}),s=[i.contextMenuOpen(n),i.contextMenuAddTo(s),[YL.util.getStrFa("tags")+YL.lang("Rename")+"/"+YL.lang("Options"),function(t){i.shortSetting=n},!YL.static.changeable],"|",[YL.util.getStrFa("arrow-up")+YL.lang("ShiftUp"),function(){Yuri2.arrUpRecord(i.startMenu.sidebar.btns,t)},!YL.static.changeable],[YL.util.getStrFa("arrow-down")+YL.lang("ShiftDown"),function(){Yuri2.arrDownRecord(i.startMenu.sidebar.btns,t)},!YL.static.changeable],"|",[YL.util.getStrFa("remove")+YL.lang("Delete"),function(){YL.util.simpleConfirm(Yuri2.template(YL.lang("DeleteBtnConfirm"),n.title),function(){i.startMenu.sidebar.btns.splice(t,1)})},!YL.static.changeable],i.contextMenuUninstall(n.app)];ContextMenu.render(e,s,this)},tilesTitleContextMenu:function(t,e){var i=this,n=i.tiles[t],s=[[YL.util.getStrFa("tags")+YL.lang("Rename"),function(){i.shortSetting=n},!YL.static.changeable],[YL.util.getStrFa("arrow-up")+YL.lang("ShiftUp"),function(){Yuri2.arrUpRecord(i.tiles,t)},!YL.static.changeable],[YL.util.getStrFa("arrow-down")+YL.lang("ShiftDown"),function(){Yuri2.arrDownRecord(i.tiles,t)},!YL.static.changeable],[YL.util.getStrFa("remove")+YL.lang("Delete"),function(){YL.util.simpleConfirm(Yuri2.template(YL.lang("DeleteGroupConfirm"),n.title),function(){i.tiles.splice(t,1)})},!YL.static.changeable]];ContextMenu.render(e,s,this)},tileMoved:function(){this.runtime.tileMoved=!0},tileMouseDown:function(t){var n=this,s=t.pageX,o=t.pageY,t=function t(e){var i=e.pageX,e=e.pageY;5<Math.abs(i-s)+Math.abs(e-o)&&(n.runtime.tileMoved=!0),$(document).unbind("mouseup",t)};$(document).on("mouseup",t)},tileClick:function(t){this.runtime.tileMoved||this.appOpen(t.app,t,t),this.runtime.tileMoved=!1},btnShortSettingAdvanceClick:function(t){this.shortSetting=null,YL.open("yl-system",{data:{appSetting:t}})},shortSettingParamsAdd:function(){this.runtime.shortcutNewParamName&&this.runtime.shortcutNewParamValue&&(this.shortSetting.params||this.$set(this.shortSetting,"params",{}),this.$set(this.shortSetting.params,this.runtime.shortcutNewParamName,this.runtime.shortcutNewParamValue),this.runtime.shortcutNewParamName="",this.runtime.shortcutNewParamValue="")},shortSettingParamsDelete:function(t){this.$delete(this.shortSetting.params,t)},startMenuResizeMouseDown:function(t){var i=this,n=i.runtime.startMenu;n.drag.x=t.pageX,n.drag.y=t.pageY,n.drag.mDown=!0;var t=function t(e){n.drag.mDown&&(n.drag.mDown=!1,$(document).unbind("mouseup",t),$(document).unbind("mousemove",s))},s=function(t){var e;n.drag.mDown&&(e=t.pageX,t=t.pageY,i.startMenu.width+=e-n.drag.x,320<i.startMenu.width||(i.startMenu.width=320),i.startMenu.height-=(i.configs.topTaskBar?-1:1)*(t-n.drag.y),160<i.startMenu.height||(i.startMenu.height=160),n.drag.x=e,n.drag.y=t,i.onResize())};$(document).mouseup(t),$(document).mousemove(s)}},watch:{shortSetting:{handler:function(t,e){t&&(this.drawer=null)}},"configs.wallpaper":{handler:function(t,e){var i=this,n=new Image;n.src=t,n.onload=function(){i.runtime.wallpaper=t,i.configs.autoThemeColor&&i.backgroundToThemeColor()},i.backgroundUpdateScale()}},wins:{handler:function(t,e){var i,n=0;for(i in this.wins)this.wins[i].plugin||n++;this.runtime.winOpened=n}},"startMenu.open":{handler:function(t,e){t&&this.$nextTick(YL.util.artificiallyResize)}},"startMenu.menu":{handler:function(t,e){this.$nextTick(YL.util.artificiallyResize)}}},computed:{smallScreenAndMenuOpend:function(){return this.runtime.isSmallScreen&&this.startMenu.open},tilesBoxStyle:function(){var t,e=this.runtime.clientSize.width;return this.runtime.isSmallScreen&&(t=48+(this.runtime.menuOnLeft?e:0)),{left:this.runtime.isSmallScreen?t+"px":"312px"}},menuStyle:function(){var t=this.runtime.clientSize.width;return this.runtime.isSmallScreen?{left:48+(this.runtime.menuOnLeft?0:-t)+"px"}:{}},barStyle:function(){if(this.configs.topTaskBar)return{top:0,bottom:"none"}},centerStyle:function(){return this.configs.topTaskBar?{top:"40px"}:{bottom:"40px"}},backgroundCross:function(){var t=this.runtime;return t.wallpaperScale<t.clientSize.width/t.clientSize.height}}})};