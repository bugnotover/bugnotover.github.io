<!DOCTYPE html><html lang="cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="../../../res/components/font-awesome-4.7.0/css/font-awesome.min.css"><script src="../../yl.app.js"></script><script src="../../../res/components/vue.min.js"></script><script src="../../../res/components/jquery-2.2.4.min.js"></script><script src="../../../res/components/jquery.nicescroll.min.js"></script><link rel="stylesheet" href="./index.css"><title>浏览器</title></head><body><div id="app"><div id="url-box"><input @keyup.enter="visit()" id="url-ipt" spellcheck="false" autofocus v-model="url"></div><div id="btn-go" @click="visit()"><i class="fa fa-location-arrow fa-fw"></i></div><div class="clear"></div><ul id="history-box"><li v-for="item in list"><span class="left text-one-line" @click="visit(item.url)" :title="item.url">{{item.url}}</span> <span class="right text-one-line">{{new Date(item.date).format('MM-dd hh:mm')}}</span></li></ul></div><script>var storageName="yluiAppsBrowser";function urlFormat(t){t=t.replace(/(^\s*)|(\s*$)/g,"");return/^(https?:\/\/|\.\.?\/|\/\/?)/i.test(t)||(t="//"+t),t}function jump(t){if(YLApp.id)YLApp.eval("setWinData",{url:t,urlBar:t});else try{location.href=t}catch(t){alert("不正确的地址")}}var vue=new Vue({el:"#app",data:{url:"",list:[]},created:function(){Date.prototype.format=function(t){t||(t="yyyy-MM-dd hh:mm:ss");var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},localStorage[storageName]&&(this.list=JSON.parse(localStorage[storageName])),this.$nextTick(function(){$("#history-box").niceScroll({cursorcolor:"#ffffff30",cursorwidth:"4px",cursorborder:"none",grabcursorenabled:!1})})},methods:{save:function(){localStorage[storageName]=JSON.stringify(this.list)},visit:function(s){if(s||(s=this.url),s){if(s=urlFormat(s),0<this.list.length){var r=!1,i=null;this.list.forEach(function(t,e){r||t.url===s&&(r=!0,i=e)}),r&&this.list.splice(i,1)}this.list.unshift({url:s,date:Date.now()}),50<this.list.length&&this.list.pop(),this.save(),jump(s)}}}})</script></body></html>