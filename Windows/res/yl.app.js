"use strict";window.YLApp={EVENTS:{DATA_CHANGED:"dataChanged",OPEN:"open",CLOSE:"close",DESKTOP_MOUSE_MOVE:"desktopMouseMove",DESKTOP_MOUSE_DOWN:"desktopMouseDown",DESKTOP_MOUSE_UP:"desktopMouseUp",DESKTOP_CLICK:"desktopClick",RESIZE:"resize"},METHODS:{GET_ID:"getID",GET_VERSION:"getVersion",HISTORY_BACK:"historyBack",HISTORY_BACK_AVAILABLE:"historyBackAvailable",HISTORY_FORWARD:"historyForward",HISTORY_FORWARD_AVAILABLE:"historyForwardAvailable",REFRESH:"refresh",SET_WIN_DATA:"setWinData",GET_WIN_DATA:"getWinData",SET_WALLPAPER:"setWallpaper",SET_THEME_COLOR:"setThemeColor",GET_CONFIGS:"getConfigs",GET_RUNTIME:"getRuntime",OPEN:"open",CLOSE:"close",MINIMIZE:"minimize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",RESTORE:"restore",MSG:"msg",SIMPLE_MSG:"simpleMsg",SET_APP_BADGE:"setAppBadge",GET_APP_VERSION:"getAppVersion",UNINSTALL:"uninstall",IMPORT:"import",EXPORT:"export",EVAL:"eval",SETUP:"setup"},_idCounter:0,_cbs:{},_cbReady:null,_created:!1,_cbEvent:function(){},id:"",secrete:"",data:null,oldHref:"",emit:function(e,t,n){var a=this._idCounter++;parent.postMessage({from:[YLApp.id,YLApp.secrete],type:"ylui-emit",session:a,emit:{event:e,data:t,target:n}},"*")},eval:function(e,t,n){var a=this._idCounter++;this._cbs[a]=n,parent.postMessage({from:[YLApp.id,YLApp.secrete],type:"ylui-eval",session:a,eval:{method:e,data:t}},"*")},open:function(e){this.eval("open",[{url:e}])},onEvent:function(e){this._cbEvent=e},onReady:function(e){!1!==this._cbReady&&(this._cbReady=e=e||function(){})},hashBugForIeFix:function(){document.body.focus()},getWinObject:function(e){try{var t=parent.YL.vue.wins[e].idIframe;return parent.document.getElementById(t).contentWindow}catch(e){return null}}};var ylOnMessage=function(e){var t,n=e.data;switch(n.type){case"ylui-ping":YLApp.id?(parent.postMessage({from:[YLApp.id,YLApp.secrete],type:"ylui-pong"},"*"),YLApp._cbReady&&(t=YLApp._cbReady(),(YLApp._cbReady=!1)!==t&&YLApp.emit("ready",null,!0)),YLApp._created||(YLApp.eval("getWinData",{},function(e){""===e.title&&YLApp.eval("setWinData",{title:document.title})}),a=function(e){116===((e=e||window.event).which||e.keyCode)&&(e.preventDefault?e.preventDefault():(event.keyCode=0,e.returnValue=!1),YLApp.eval("refresh",window.YLApp.id))},document.addEventListener?document.addEventListener("keydown",a,!1):document.attachEvent("onkeydown",a),YLApp._created=!0)):(YLApp.id=n.id,YLApp.secrete=n.secrete,YLApp.data=n.data,i=location.href,YLApp.oldHref!==i&&(YLApp.oldHref=i,YLApp.eval("urlRel",i)));break;case"ylui-eval":var a=n.session,i=n.result;YLApp._cbs[a]&&YLApp._cbs[a](i);break;case"ylui-event":YLApp._cbEvent(n)}};window.attachEvent?window.attachEvent("message",ylOnMessage):window.addEventListener("message",ylOnMessage);